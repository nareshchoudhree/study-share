<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyShare - Student Notes Exchange</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/appwrite@15.0.0/dist/index.umd.js"></script>
    <style>
        .pdf-icon {
            color: #e74c3c;
        }
        .dropdown:hover .dropdown-menu {
            display: block;
        }
        .file-upload {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }
        .file-upload input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
        }
        .pdf-preview {
            border: 2px dashed #ddd;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        .pdf-preview.has-file {
            border-color: #4CAF50;
        }
        .note-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .progress-bar {
            height: 5px;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.3s;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between">
                <div class="flex space-x-7">
                    <div>
                        <a href="#" class="flex items-center py-4 px-2">
                            <i class="fas fa-book-open text-blue-600 text-2xl mr-2"></i>
                            <span class="font-semibold text-gray-900 text-lg">StudyShare</span>
                        </a>
                    </div>
                    <div class="hidden md:flex items-center space-x-1">
                        <a href="#home" class="py-4 px-2 text-blue-600 border-b-4 border-blue-600 font-medium">Home</a>
                        <a href="#browse" class="py-4 px-2 text-gray-500 hover:text-blue-600 transition duration-300">Browse Notes</a>
                        <a href="#upload" class="py-4 px-2 text-gray-500 hover:text-blue-600 transition duration-300">Upload Notes</a>
                        <a href="#about" class="py-4 px-2 text-gray-500 hover:text-blue-600 transition duration-300">About</a>
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-3">
                    <a href="#" id="loginBtn" class="py-2 px-4 text-gray-700 hover:text-blue-600 transition duration-300">Login</a>
                    <a href="#" id="registerBtn" class="py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700 transition duration-300">Register</a>
                    <div class="dropdown relative hidden" id="userDropdown">
                        <button class="flex items-center space-x-2 focus:outline-none">
                            <img src="https://via.placeholder.com/30" alt="User" class="rounded-full">
                            <span id="usernameDisplay" class="font-medium"></span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        <div class="dropdown-menu absolute hidden right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">My Notes</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Account Settings</a>
                            <a href="#" id="logoutBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Logout</a>
                        </div>
                    </div>
                </div>
                <div class="md:hidden flex items-center">
                    <button class="outline-none mobile-menu-button">
                        <i class="fas fa-bars text-gray-500"></i>
                    </button>
                </div>
            </div>
        </div>
        <div class="hidden mobile-menu">
            <ul>
                <li><a href="#homeOSD" class="block text-sm px-2 py-4 hover:bg-blue-600 hover:text-white transition duration-300">Home</a></li>
                <li><a href="#browse" class="block text-sm px-2 py-4 hover:bg-blue-600 hover:text-white transition duration-300">Browse Notes</a></li>
                <li><a href="#upload" class="block text-sm px-2 py-4 hover:bg-blue-600 hover:text-white transition duration-300">Upload Notes</a></li>
                <li><a href="#about" class="block text-sm px-2 py-4 hover:bg-blue-600 hover:text-white transition duration-300">About</a></li>
                <li class="border-t border-gray-200"><a href="#" id="mobileLoginBtn" class="block text-sm px-2 py-4 hover:bg-blue-600 hover:text-white transition duration-300">Login</a></li>
                <li><a href="#" id="mobileRegisterBtn" class="block text-sm px-2 py-4 hover:bg-blue-600 hover:text-white transition duration-300">Register</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="py-20 bg-gradient-to-r from-blue-500 to-indigo-600 text-white">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 mb-10 md:mb-0">
                    <h1 class="text-4xl md:text-5xl font-bold mb-6">Share & Discover Study Notes</h1>
                    <p class="text-xl mb-8">Join thousands of students sharing their lecture notes, study guides, and exam prep materials.</p>
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                        <a href="#upload" class="bg-white text-blue-600 hover:bg-gray-100 px-6 py-3 rounded-lg font-semibold text-center">Upload Notes</a>
                        <a href="#browse" class="bg-transparent border-2 border-white hover:bg-white hover:text-blue-600 px-6 py-3 rounded-lg font-semibold text-center">Browse Notes</a>
                    </div>
                </div>
                <div class="md:w-1/2">
                    <img src="https://static.vecteezy.com/system/resources/previews/020/693/387/original/notebooks-school-free-png.png" alt="Students studying" class="w-full max-w-md mx-auto">
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="py-12 bg-white">
        <div class="container mx-auto px-4">
            <div class="flex flex-wrap justify-center text-center">
                <div class="w-full md:w-1/3 px-4 py-6">
                    <div class="text-5xl font-bold text-blue-600 mb-2" id="totalNotes">0</div>
                    <div class="text-gray-600">Notes Shared</div>
                </div>
                <div class="w-full md:w-1/3 px-4 py-6">
                    <div class="text-5xl font-bold text-blue-600 mb-2" id="totalUsers">0</div>
                    <div class="text-gray-600">Active Students</div>
                </div>
                <div class="w-full md:w-1/3 px-4 py-6">
                    <div class="text-5xl font-bold text-blue-600 mb-2" id="totalDownloads">0</div>
                    <div class="text-gray-600">Downloads</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Browse Notes Section -->
    <section id="browse" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">Browse Study Notes</h2>
            
            <!-- Search and Filter -->
            <div class="mb-8 bg-white p-6 rounded-lg shadow-md">
                <div class="flex flex-col md:flex-row md:space-x-4 space-y-4 md:space-y-0">
                    <div class="flex-1">
                        <input type="text" placeholder="Search notes by subject, course, or keyword..." class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex space-x-2">
                        <select class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>All Subjects</option>
                            <option>Mathematics</option>
                            <option>Science</option>
                            <option>Engineering</option>
                            <option>Business</option>
                            <option>Arts</option>
                        </select>
                        <select class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>Sort By</option>
                            <option>Most Recent</option>
                            <option>Most Downloaded</option>
                            <option>Highest Rated</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Notes Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="notesGrid">
                <!-- Note cards will be dynamically inserted here -->
            </div>
            
            <!-- Pagination -->
            <div class="mt-12 flex justify-center">
                <nav class="inline-flex rounded-md shadow">
                    <a href="#" class="px-3 py-2 rounded-l-md border border-gray-300 bg-white text-gray-500 hover:bg-gray-50">Previous</a>
                    <a href="#" class="px-3 py-2 border-t border-b border-gray-300 bg-blue-600 text-white">1</a>
                    <a href="#" class="px-3 py-2 border border-gray-300 bg-white text-gray-500 hover:bg-gray-50">2</a>
                    <a href="#" class="px-3 py-2 border border-gray-300 bg-white text-gray-500 hover:bg-gray-50">3</a>
                    <a href="#" class="px-3 py-2 rounded-r-md border border-gray-300 bg-white text-gray-500 hover:bg-gray-50">Next</a>
                </nav>
            </div>
        </div>
    </section>

    <!-- Upload Section -->
    <section id="upload" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">Upload Your Notes</h2>
            
            <div class="max-w-3xl mx-auto bg-gray-50 p-8 rounded-lg shadow-md">
                <form id="uploadForm">
                    <div class="mb-6">
                        <label class="block text-gray-700 font-medium mb-2" for="noteTitle">Note Title</label>
                        <input type="text" id="noteTitle" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g. Calculus 101 Lecture Notes" required>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-gray-700 font-medium mb-2" for="noteSubject">Subject/Course</label>
                        <select id="noteSubject" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                            <option value="">Select a subject</option>
                            <option value="Mathematics">Mathematics</option>
                            <option value="Physics">Physics</option>
                            <option value="Chemistry">Chemistry</option>
                            <option value="Biology">Biology</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Engineering">Engineering</option>
                            <option value="Business">Business</option>
                            <option value="Economics">Economics</option>
                            <option value="Literature">Literature</option>
                            <option value="History">History</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-gray-700 font-medium mb-2" for="noteDescription">Description</label>
                        <textarea id="noteDescription" rows="4" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Brief description of your notes (topics covered, special features, etc.)"></textarea>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-gray-700 font-medium mb-2">Upload PDF File</label>
                        <div class="pdf-preview rounded-lg p-6 mb-4 text-center">
                            <i class="fas fa-file-pdf pdf-icon text-5xl mb-4"></i>
                            <p class="text-gray-500">Drag & drop your PDF file here or click to browse</p>
                            <p class="text-sm text-gray-400 mt-2">Max file size: 10MB</p>
                            <div class="progress-bar mt-2"></div>
                        </div>
                        <div class="file-upload">
                            <input type="file" id="pdfUpload" accept=".pdf" class="hidden" required>
                            <label for="pdfUpload" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg cursor-pointer">Select PDF File</label>
                        </div>
                        <p id="fileName" class="text-sm text-gray-500 mt-2"></p>
                    </div>
                    
                    <div class="mb-6">
                        <label class="flex items-center">
                            <input type="checkbox" class="form-checkbox h-5 w-5 text-blue-600" required>
                            <span class="ml-2 text-gray-700">I confirm that I have the rights to share this content</span>
                        </label>
                    </div>
                    
                    <div class="flex justify-end">
                        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold">Upload Notes</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">About StudyShare</h2>
            
            <div class="max-w-4xl mx-auto">
                <div class="bg-white p-8 rounded-lg shadow-md mb-8">
                    <h3 class="text-xl font-semibold mb-4">Our Mission</h3>
                    <p class="text-gray-700 mb-4">StudyShare was created to help students collaborate and share knowledge. We believe that by working together and sharing resources, students can achieve better academic results and reduce the stress of studying.</p>
                    <p class="text-gray-700">Our platform provides a simple way to upload and download high-quality study notes, creating a community of learners helping each other succeed.</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4">For Students</h3>
                        <ul class="space-y-3">
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                <span class="text-gray-700">Access thousands of study notes from students at top universities</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                <span class="text-gray-700">Find notes specific to your courses and professors</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                <span class="text-gray-700">Save time by leveraging others' well-organized notes</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4">For Contributors</h3>
                        <ul class="space-y-3">
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                <span class="text-gray-700">Help fellow students while building your academic reputation</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                <span class="text-gray-700">Get recognition for your high-quality notes</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                <span class="text-gray-700">Access premium features as a top contributor</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4">StudyShare</h3>
                    <p class="text-gray-400">The premier platform for students to share and discover high-quality study notes.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="#home" class="text-gray-400 hover:text-white transition">Home</a></li>
                        <li><a href="#browse" class="text-gray-400 hover:text-white transition">Browse Notes</a></li>
                        <li><a href="#upload" class="text-gray-400 hover:text-white transition">Upload Notes</a></li>
                        <li><a href="#about" class="text-gray-400 hover:text-white transition">About Us</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Legal</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Terms of Service</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Privacy Policy</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Copyright Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Connect</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                    <p class="text-gray-400 mt-4">contact@studyshare.com</p>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>Â© 2023 StudyShare. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-md">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold">Login to StudyShare</h3>
                    <button id="closeLoginModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="loginForm">
                    <div class="mb-4">
                        <label class="block text-gray-700 mb-2" for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-700 mb-2" for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="flex items-center justify-between mb-4">
                        <label class="flex items-center">
                            <input type="checkbox" class="form-checkbox h-4 w-4 text-blue-600">
                            <span class="ml-2 text-gray-700">Remember me</span>
                        </label>
                        <a href="#" class="text-blue-600 hover:underline">Forgot password?</a>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-semibold">Login</button>
                </form>
                <div class="mt-4 text-center">
                    <p class="text-gray-600">Don't have an account? <a href="#" id="showRegisterFromLogin" class="text-blue-600 hover:underline">Register</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-md">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold">Create an Account</h3>
                    <button id="closeRegisterModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="registerForm">
                    <div class="mb-4">
                        <label class="block text-gray-700 mb-2" for="registerName">Full Name</label>
                        <input type="text" id="registerName" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 mb-2" for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 mb-2" for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-700 mb-2" for="registerConfirmPassword">Confirm Password</label>
                        <input type="password" id="registerConfirmPassword" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="mb-4">
                        <label class="flex items-center">
                            <input type="checkbox" class="form-checkbox h-4 w-4 text-blue-600" required>
                            <span class="ml-2 text-gray-700">I agree to the <a href="#" class="text-blue-600 hover:underline">Terms of Service</a> and <a href="#" class="text-blue-600 hover:underline">Privacy Policy</a></span>
                        </label>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-semibold">Create Account</button>
                </form>
                <div class="mt-4 text-center">
                    <p class="text-gray-600">Already have an account? <a href="#" id="showLoginFromRegister" class="text-blue-600 hover:underline">Login</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Note Preview Modal -->
    <div id="notePreviewModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-4xl max-h-screen overflow-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="previewNoteTitle" class="text-2xl font-bold"></h3>
                    <button id="closePreviewModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="flex items-center mb-6">
                    <img src="https://via.placeholder.com/40" alt="Author" class="rounded-full mr-3">
                    <div>
                        <p id="previewNoteAuthor" class="font-medium"></p>
                        <p id="previewNoteDate" class="text-sm text-gray-500"></p>
                    </div>
                </div>
                <div class="mb-6">
                    <p id="previewNoteDescription" class="text-gray-700"></p>
                </div>
                <div class="bg-gray-100 p-4 rounded-lg mb-6">
                    <div class="flex items-center">
                        <i class="fas fa-file-pdf pdf-icon text-3xl mr-4"></i>
                        <div class="flex-1">
                            <p id="previewNoteFilename" class="font-medium"></p>
                            <p id="previewNoteFilesize" class="text-sm text-gray-500"></p>
                        </div>
                        <button id="downloadNoteBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium">Download PDF</button>
                    </div>
                </div>
                <div class="border-t border-gray-200 pt-4">
                    <h4 class="font-semibold mb-3">Note Details</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <p class="text-sm text-gray-500">Subject</p>
                            <p id="previewNoteSubject" class="font-medium"></p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-500">Downloads</p>
                            <p id="previewNoteDownloads" class="font-medium"></p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-500">Upload Date</p>
                            <p id="previewNoteUploadDate" class="font-medium"></p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-500">Rating</p>
                            <div class="flex items-center">
                                <div class="flex">
                                    <i class="fas fa-star text-yellow-400"></i>
                                    <i class="fas fa-star text-yellow-400"></i>
                                    <i class="fas fa-star text-yellow-400"></i>
                                    <i class="fas fa-star text-yellow-400"></i>
                                    <i class="fas fa-star-half-alt text-yellow-400"></i>
                                </div>
                                <span class="ml-2 text-gray-700">4.5 (24 reviews)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="successToast" class="fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center transform translate-y-10 opacity-0 transition-all duration-300 z-50">
        <i class="fas fa-check-circle mr-3"></i>
        <span id="toastMessage">Operation completed successfully!</span>
    </div>

    <script>
        // Initialize Appwrite client
        const client = new Appwrite.Client();
        client
            .setEndpoint('https://fra.cloud.appwrite.io/v1') // e.g., 'https://cloud.appwrite.io/v1'
            .setProject('68382a3100107360bf24'); // Replace with your Appwrite project ID

        const account = new Appwrite.Account(client);
        const databases = new Appwrite.Databases(client);
        const storage = new Appwrite.Storage(client);

        // Appwrite configuration
        const DATABASE_ID = '68382af700129c7bca60'; // Replace with your Appwrite database ID
        const NOTES_COLLECTION_ID = '68382c2a002426c4f2d8'; // Replace with your notes collection ID
        const USERS_COLLECTION_ID = '68382b3b00359aecee59'; // Replace with your users collection ID
        const BUCKET_ID = '6838311100000962dbc9'; // Replace with your storage bucket ID

        // Current user state
        let currentUser = null;

        // DOM Elements
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const mobileLoginBtn = document.getElementById('mobileLoginBtn');
        const mobileRegisterBtn = document.getElementById('mobileRegisterBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const userDropdown = document.getElementById('userDropdown');
        const usernameDisplay = document.getElementById('usernameDisplay');
        const loginModal = document.getElementById('loginModal');
        const registerModal = document.getElementById('registerModal');
        const closeLoginModal = document.getElementById('closeLoginModal');
        const closeRegisterModal = document.getElementById('closeRegisterModal');
        const showRegisterFromLogin = document.getElementById('showRegisterFromLogin');
        const showLoginFromRegister = document.getElementById('showLoginFromRegister');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const uploadForm = document.getElementById('uploadForm');
        const pdfUpload = document.getElementById('pdfUpload');
        const pdfPreview = document.querySelector('.pdf-preview');
        const fileName = document.getElementById('fileName');
        const notesGrid = document.getElementById('notesGrid');
        const notePreviewModal = document.getElementById('notePreviewModal');
        const closePreviewModal = document.getElementById('closePreviewModal');
        const downloadNoteBtn = document.getElementById('downloadNoteBtn');
        const successToast = document.getElementById('successToast');
        const toastMessage = document.getElementById('toastMessage');

        // Mobile menu toggle
        const mobileMenuButton = document.querySelector('.mobile-menu-button');
        const mobileMenu = document.querySelector('.mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Check if user is logged in on page load
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                currentUser = await account.get();
                updateAuthUI();
            } catch (error) {
                console.log('No user logged in:', error);
            }
            await renderNotes();
            await updateStats();
        });

        // Update authentication UI
        function updateAuthUI() {
            if (currentUser) {
                loginBtn.classList.add('hidden');
                registerBtn.classList.add('hidden');
                mobileLoginBtn.classList.add('hidden');
                mobileRegisterBtn.classList.add('hidden');
                userDropdown.classList.remove('hidden');
                usernameDisplay.textContent = currentUser.name.split(' ')[0];
            } else {
                loginBtn.classList.remove('hidden');
                registerBtn.classList.remove('hidden');
                mobileLoginBtn.classList.remove('hidden');
                mobileRegisterBtn.classList.remove('hidden');
                userDropdown.classList.add('hidden');
            }
        }

        // Modal controls
        loginBtn.addEventListener('click', (e) => {
            e.preventDefault();
            loginModal.classList.remove('hidden');
        });

        mobileLoginBtn.addEventListener('click', (e) => {
            e.preventDefault();
            loginModal.classList.remove('hidden');
            mobileMenu.classList.add('hidden');
        });

        registerBtn.addEventListener('click', (e) => {
            e.preventDefault();
            registerModal.classList.remove('hidden');
        });

        mobileRegisterBtn.addEventListener('click', (e) => {
            e.preventDefault();
            registerModal.classList.remove('hidden');
            mobileMenu.classList.add('hidden');
        });

        closeLoginModal.addEventListener('click', () => {
            loginModal.classList.add('hidden');
        });

        closeRegisterModal.addEventListener('click', () => {
            registerModal.classList.add('hidden');
        });

        showRegisterFromLogin.addEventListener('click', (e) => {
            e.preventDefault();
            loginModal.classList.add('hidden');
            registerModal.classList.remove('hidden');
        });

        showLoginFromRegister.addEventListener('click', (e) => {
            e.preventDefault();
            registerModal.classList.add('hidden');
            loginModal.classList.remove('hidden');
        });

        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === loginModal) {
                loginModal.classList.add('hidden');
            }
            if (e.target === registerModal) {
                registerModal.classList.add('hidden');
            }
            if (e.target === notePreviewModal) {
                notePreviewModal.classList.add('hidden');
            }
        });

        // Login form submission
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                await account.createEmailPasswordSession(email, password);
                currentUser = await account.get();
                updateAuthUI();
                loginModal.classList.add('hidden');
                showToast('Login successful!');
            } catch (error) {
                showToast(`Login failed: ${error.message}`, 'error');
            }
        });

        // Register form submission
        registerForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }

            try {
                // Create user
                const user = await account.create(Appwrite.ID.unique(), email, password, name);
                
                // Store additional user info in database
                await databases.createDocument(
                    DATABASE_ID,
                    USERS_COLLECTION_ID,
                    user.$id,
                    {
                        name,
                        email,
                        createdAt: new Date().toISOString()
                    }
                );

                // Log in the new user
                await account.createEmailPasswordSession(email, password);
                currentUser = await account.get();
                updateAuthUI();
                registerModal.classList.add('hidden');
                showToast('Registration successful!');
            } catch (error) {
                showToast(`Registration failed: ${error.message}`, 'error');
            }
        });

        // Logout
        logoutBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            try {
                await account.deleteSession('current');
                currentUser = null;
                updateAuthUI();
                showToast('Logged out successfully');
            } catch (error) {
                showToast(`Logout failed: ${error.message}`, 'error');
            }
        });

        // PDF upload handling
        pdfUpload.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                if (file.type !== 'application/pdf') {
                    showToast('Please upload a PDF file', 'error');
                    return;
                }

                if (file.size > 10 * 1024 * 1024) { // 10MB limit
                    showToast('File size exceeds 10MB limit', 'error');
                    return;
                }

                fileName.textContent = file.name;
                pdfPreview.classList.add('has-file');

                // Simulate upload progress
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 10;
                    document.querySelector('.progress-bar').style.width = `${progress}%`;
                    if (progress >= 100) {
                        clearInterval(progressInterval);
                    }
                }, 100);
            }
        });

        // Drag and drop for PDF upload
        pdfPreview.addEventListener('dragover', (e) => {
            e.preventDefault();
            pdfPreview.classList.add('bg-blue-50');
        });

        pdfPreview.addEventListener('dragleave', () => {
            pdfPreview.classList.remove('bg-blue-50');
        });

        pdfPreview.addEventListener('drop', (e) => {
            e.preventDefault();
            pdfPreview.classList.remove('bg-blue-50');

            const file = e.dataTransfer.files[0];
            if (file) {
                if (file.type !== 'application/pdf') {
                    showToast('Please upload a PDF file', 'error');
                    return;
                }

                if (file.size > 10 * 1024 * 1024) { // 10MB limit
                    showToast('File size exceeds 10MB limit', 'error');
                    return;
                }

                // Set the file to the input
                const dataTransfer = new DataTransfer();
                dataTransfer.items.add(file);
                pdfUpload.files = dataTransfer.files;

                fileName.textContent = file.name;
                pdfPreview.classList.add('has-file');

                // Simulate upload progress
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 10;
                    document.querySelector('.progress-bar').style.width = `${progress}%`;
                    if (progress >= 100) {
                        clearInterval(progressInterval);
                    }
                }, 100);
            }
        });

        // Upload form submission
        uploadForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            if (!currentUser) {
                showToast('Please login to upload notes', 'error');
                loginModal.classList.remove('hidden');
                return;
            }

            const title = document.getElementById('noteTitle').value;
            const subject = document.getElementById('noteSubject').value;
            const description = document.getElementById('noteDescription').value;
            const file = pdfUpload.files[0];

            if (!file) {
                showToast('Please select a PDF file', 'error');
                return;
            }

            try {
                // Upload file to Appwrite Storage
                const fileResponse = await storage.createFile(
                    BUCKET_ID,
                    Appwrite.ID.unique(),
                    file
                );

                // Create note document in database
                const note = await databases.createDocument(
                    DATABASE_ID,
                    NOTES_COLLECTION_ID,
                    Appwrite.ID.unique(),
                    {
                        title,
                        subject,
                        description,
                        fileId: fileResponse.$id,
                        filename: file.name,
                        filesize: `${(file.size / (1024 * 1024)).toFixed(1)} MB`,
                        uploadDate: new Date().toISOString().split('T')[0],
                        downloads: 0,
                        author: currentUser.name,
                        authorId: currentUser.$id,
                        rating: 0
                    }
                );

                // Reset form
                uploadForm.reset();
                pdfPreview.classList.remove('has-file');
                fileName.textContent = '';
                document.querySelector('.progress-bar').style.width = '0%';

                // Update UI
                await renderNotes();
                await updateStats();
                showToast('Notes uploaded successfully!');

                // Scroll to browse section
                document.querySelector('#browse').scrollIntoView({ behavior: 'smooth' });
            } catch (error) {
                showToast(`Upload failed: ${error.message}`, 'error');
            }
        });

        // Render notes in the grid
        async function renderNotes() {
            try {
                const response = await databases.listDocuments(DATABASE_ID, NOTES_COLLECTION_ID);
                const notes = response.documents;
                notesGrid.innerHTML = '';

                notes.forEach(note => {
                    const noteCard = document.createElement('div');
                    noteCard.className = 'bg-white rounded-lg shadow-md overflow-hidden note-card transition duration-300';
                    noteCard.innerHTML = `
                        <div class="p-6">
                            <div class="flex items-center mb-4">
                                <i class="fas fa-file-pdf pdf-icon text-3xl mr-4"></i>
                                <div>
                                    <h3 class="font-bold text-lg truncate">${note.title}</h3>
                                    <p class="text-gray-500">${note.subject}</p>
                                </div>
                            </div>
                            <p class="text-gray-700 mb-4 line-clamp-2">${note.description}</p>
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-sm text-gray-500">${note.uploadDate}</p>
                                    <p class="text-sm text-gray-500">${note.downloads} downloads</p>
                                </div>
                                <button class="view-note-btn bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium" data-id="${note.$id}">View</button>
                            </div>
                        </div>
                    `;
                    notesGrid.appendChild(noteCard);
                });

                // Add event listeners to view buttons
                document.querySelectorAll('.view-note-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const noteId = btn.getAttribute('data-id');
                        viewNote(noteId);
                    });
                });
            } catch (error) {
                showToast(`Failed to load notes: ${error.message}`, 'error');
            }
        }

        // View note details
        async function viewNote(id) {
            try {
                const note = await databases.getDocument(DATABASE_ID, NOTES_COLLECTION_ID, id);

                document.getElementById('previewNoteTitle').textContent = note.title;
                document.getElementById('previewNoteAuthor').textContent = `By ${note.author}`;
                document.getElementById('previewNoteDate').textContent = `Uploaded on ${note.uploadDate}`;
                document.getElementById('previewNoteDescription').textContent = note.description;
                document.getElementById('previewNoteFilename').textContent = note.filename;
                document.getElementById('previewNoteFilesize').textContent = note.filesize;
                document.getElementById('previewNoteSubject').textContent = note.subject;
                document.getElementById('previewNoteDownloads').textContent = note.downloads;
                document.getElementById('previewNoteUploadDate').textContent = note.uploadDate;

                // Set download button data attribute
                downloadNoteBtn.setAttribute('data-id', note.$id);

                notePreviewModal.classList.remove('hidden');
            } catch (error) {
                showToast(`Failed to load note: ${error.message}`, 'error');
            }
        }

        // Download note
        downloadNoteBtn.addEventListener('click', async () => {
            const noteId = downloadNoteBtn.getAttribute('data-id');

            try {
                // Get note document
                const note = await databases.getDocument(DATABASE_ID, NOTES_COLLECTION_ID, noteId);

                // Increment download count
                await databases.updateDocument(DATABASE_ID, NOTES_COLLECTION_ID, noteId, {
                    downloads: note.downloads + 1
                });

                // Get file download URL
                const filePreview = storage.getFileDownload(BUCKET_ID, note.fileId);

                // Create a temporary link to trigger download
                const link = document.createElement('a');
                link.href = filePreview;
                link.download = note.filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                // Update UI
                await renderNotes();
                await updateStats();
                showToast('Download started!');

                // Close modal after a delay
                setTimeout(() => {
                    notePreviewModal.classList.add('hidden');
                }, 1000);
            } catch (error) {
                showToast(`Download failed: ${error.message}`, 'error');
            }
        });

        // Close preview modal
        closePreviewModal.addEventListener('click', () => {
            notePreviewModal.classList.add('hidden');
        });

        // Update stats
        async function updateStats() {
            try {
                const notesResponse = await databases.listDocuments(DATABASE_ID, NOTES_COLLECTION_ID);
                const usersResponse = await databases.listDocuments(DATABASE_ID, USERS_COLLECTION_ID);
                const notes = notesResponse.documents;

                // Calculate total downloads
                const totalDownloads = notes.reduce((sum, note) => sum + note.downloads, 0);

                // Update DOM
                document.getElementById('totalNotes').textContent = notes.length.toLocaleString();
                document.getElementById('totalUsers').textContent = usersResponse.total.toLocaleString();
                document.getElementById('totalDownloads').textContent = totalDownloads.toLocaleString();
            } catch (error) {
                showToast(`Failed to update stats: ${error.message}`, 'error');
            }
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            toastMessage.textContent = message;

            if (type === 'error') {
                successToast.classList.remove('bg-green-500');
                successToast.classList.add('bg-red-500');
            } else {
                successToast.classList.remove('bg-red-500');
                successToast.classList.add('bg-green-500');
            }

            successToast.classList.remove('translate-y-10', 'opacity-0');
            successToast.classList.add('translate-y-0', 'opacity-100');

            setTimeout(() => {
                successToast.classList.remove('translate-y-0', 'opacity-100');
                successToast.classList.add('translate-y-10', 'opacity-0');
            }, 3000);
        }
    </script>
</body>
</html>
